---
import BaseLayout from "@common/layouts/BaseLayout.astro";
import "/spieltage.ch/styles/main.scss";
import type { NavigationEntry } from "@common/layouts/types.ts";

const { locale, title, metaTitle, description, keywords, toc } =
  Astro.props.frontmatter ?? Astro.props;
const { headings } = Astro.props;

const siteName = "Luzerner Spieltage";
const siteCode = "lst";
const siteTagline = "22. + 23. MÃ¤rz 2025";

const pages = await Astro.glob("../pages/**/*");

const mainNavigation: NavigationEntry[] = pages
  .filter((page) => page.frontmatter?.navigation?.group === "main")
  .map((page) => ({
    label: page.frontmatter.navigation.label,
    order: page.frontmatter.navigation.order,
    url: page.url === "" ? "/" : page.url,
  }));

const secondaryNavigation: NavigationEntry[] = pages
  .filter((page) => page.frontmatter?.navigation?.group === "secondary")
  .map((page) => ({
    label: page.frontmatter.navigation.label,
    order: page.frontmatter.navigation.order,
    url: page.url === "" ? "/" : page.url,
  }));
---

<BaseLayout
  locale={locale}
  title={title}
  metaTitle={[metaTitle, siteName].filter(Boolean).join(" | ")}
  description={description}
  keywords={keywords}
  siteCode={siteCode}
  siteName={siteName}
  siteTagline={siteTagline}
  mainNavigation={mainNavigation}
  secondaryNavigation={secondaryNavigation}
  headings={headings}
  toc={toc ?? null}
  development={false}
>
  <slot />
</BaseLayout>
